# Безопасность блога на основе Wordpress это...

## 1. Необходимость обновляться
Обновления несут в себе исправления уязвимостей. Нельзя от них отказываться. А ещё необходимо сделать бэкап перед этим. Иногда может сильно выручить. Почитайте [это](http://codex.wordpress.org/%D0%A0%D0%B5%D0%B7%D0%B5%D1%80%D0%B2%D0%BD%D0%BE%D0%B5_%D0%BA%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_WordPress).  
Для этого можно использовать плагин:  
### BackUpWordPress  
Плагин для резервного копирования всех файлов сайта и базы данных. 
[Ссылка](http://wordpress.org/plugins/backupwordpress/)

_Примечание: 24 октября 2013 вышла версия Wordpress 3.7, в которой предусмотрено обновление в фоновом режиме. Если эта система обновления будет работать без нареканий, то всё упрощается. Просто нужно будет разобраться с автоматическим резервным копированием._

## 2. Избавление от логина Admin  
На протяжении всей истории Wordpress, _Admin_ — логин по умолчанию. Плохо это тем, что зная логин, злоумышленнику значительно проще вести подбор и перебор паролей.  
Сейчас мы рассмотрим необходимый минимум для избавления от дефолтного логина на примере версии движка 3.3-x, так как, надеюсь вы уже устанавливаете обновления.

1. Заходим в админку.  
2. В левой части ищем слово «Пользователи» и наводим на него курсор.  
3. В появившемся списке выбираем «Добавить нового».  
4. Заполняем информацию:
    - поле «Имя пользователя» — логин
    - пароль нужен сложный, прописные, строчные буквы и цифры
    - поле «Отображать как» позволяет выбрать что будет выводится в  в статьях в качестве имени автора, лучше выбрать имя или фамилию, или всё вместе, а логин выбирать нежелательно
    - поле «Роль» - выбираем «Администратор»  
5. Нажимаем «Добавить нового пользователя»  
6. Выходим из админки и заходим уже в качестве нового пользователя
7. В левой части жмём на «Пользователи»  
8. В списке пользователей находим _Admin_ и наводим на него курсор.  
9. Нажимаем удалить.  
10. Сейчас нас движок спрашивает что сделать со статьями под авторством _Admin_. Связываем их с только что созданным пользователем.  
11. Удаляем пользователя.

Всё! Единственное, что может выдать логин, это ссылки на автора в статьях. Это можно исправить в шаблоне. Или завести отдельную учётку чисто для правки контента. На ваш выбор.

## 3. Добавление неудобств при подборе пароля
  
Если ввести неправильный логин или пароль при логине, движок подсказывает, что введён неправильный логин, а при правильном логине и неправильном пароле, говорит, что пароль неправильный. Злоумышленнику незачем знать, что логин правильный и осталось только подобрать пароль. Мы просто-напросто запретим вывод этой информации

Файл:  
wp-content/themes/название-вашей-темы/functions.php  
Добавляем код:

```bash  
add_filter('login_errors',create_function('$a', "return null;"));  
```

## 4. Добавление неудобств при переборе пароля
  
### Limit Login Attempts  
Плагин блокирует на некоторое время IP адрес с которого идут множественные попытки авторизоваться. Можно настроить отправку уведомлений на e-mail. На мой взгляд — просто обязан быть у каждого владельца блога на Wordpress.
[Ссылка](http://wordpress.org/plugins/limit-login-attempts/)

## 5. Ввод в недоумение различных тёмных личностей и школьников

### Запрещаем вывод информации о версии нашего движка.

Файл:  
wp-content/themes/название-вашей-темы/functions.php  
Добавляем код:  

```bash  
remove_action('wp_head', 'wp_generator');  
```

Удаляем в корне сайта файл readme.html, содержащий информацию о версии движка.

### Запрещаем доступ к wp-config.php извне  
wp-config.php содержит все данные, необходимые для подключения к серверу MySQL и базе данных. В обычных условиях при обращении к этому файлу через браузер мы получаем пустую страницу. Исходник этого файла в текстовом виде можно увидеть только если на хостинге орудуют абсолютно безграмотные гоблины, ну или, теоретически, произошла неполадка, из-за которой php-скрипты отдаются в plain-text.  
Файл этот прямо тянет к себе начинающих взломщиков. Почти наверняка, если блог пользуется популярностью, в логах за неделю можно увидеть как минимум одно-два обращения к этому файлу.

**Вариант №1:** постебатся над малолетними хакерами, которые проверяют этот файл и поставить редирект на отдел "К



```bash  
# добавляем в .htaccess  
Redirect 301 /wp-config.php http://mvd.ru/mvd/structure1/Upravlenija/Upravlenie_K_MVD_Rossii  
```

**Вариант №2:** просто закрыть доступ из сети.

```bash  
# добавляем в .htaccess  
<files wp-config.php>  
order allow,deny  
deny from all  
</files>  
```


[Интересное исследование](http://feross.org/cmsploit/)

### Отправляем в преисподнюю потенциально зловредные запросы
Плагин **Block Bad Queries** перекрывает доступ URL, целью которых является поиск слабых мест. От целенаправленной «ручной работы» вряд ли спасёт, но боты и школьники отсеются. И это хорошо.
[Ссылка](http://wordpress.org/plugins/block-bad-queries/)








