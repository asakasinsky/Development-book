Устанавливаем

npm install gitbook -g


Готовим репозиторий

https://pages.github.com/

Пустой репозиторий для книги у меня уже был, так что осталось лишь настроить его. Настройка оказалась предельно простой: необходимо создать в репозитории пустую ветку по имени gh-pages, что-то в неё положить, закоммитить-запушить — и вот уже нас встречает ваша GitHub-страница. Однако, как выяснилось, делать всё это следует в точности как описано [здесь.](https://help.github.com/articles/creating-project-pages-manually)

В общем, сделал — и веб-страница уже тут: denisshevchenko.github.io/ohaskell/index.html. Обращаю ваше внимание: после первого пуша в ветку gh-pages страница становится доступной не мгновенно, а через несколько минут.


Строим веб-книгу

README.md    # Титульный лист книги
SUMMARY.md   # Описание структуры книги
intro/
    README.md   # Введение к вступительной части книги
    for-whom.md
    what-for.md
    who.md
    why.md

Идея именно такая: в ветке master будет лежать Markdown-версия книги, а в ветке gh-pages — веб-версия. Обращаю ваше внимание: файлы README.md и SUMMARY.md необходимы. В первом из них пишем некое общее введение, которое станет титульной веб-страницей книги. А вот в SUMMARY.md необходимо описать структуру книги. В моём случае это выглядит так:

### Summary

* [Лирическое вступление](intro/README.md)
  * [Кто](intro/who.md)
  * [Почему](intro/why.md)
  * [Зачем](intro/what-for.md)
  * [Для кого](intro/for-whom.md)

Я отразил иерархию страниц в стиле классического Markdown-оглавления. Разумеется, файлы, не указанные в SUMMARY.md, частью веб-книги не станут.

Строим

$ gitbook build ./ --github=denisshevchenko/ohaskell --title="О Haskell по-человечески"

gitbook build ./ --github=asakasinsky/Development-book --title="Development Book"

Starting build ...
Successfuly built !

Коммитим это хозяйство и пушим в ветку master.

Новоселье

Настало время поселить веб-книгу в её уютный дом:

$ git checkout gh-pages
$ git checkout master -- _book
$ git mv _book/* .


Первой командой переходим в ветку gh-pages. Второй командой забираем из ветки master тот самый каталог _book, созданный gitbook-ом. Третьей командой вытаскиваем содержимое этого каталога в корень ветки gh-pages. К сожалению, я так и не выяснил, как забрать из другой ветки лишь содержимое каталога, а не весь каталог. Завершаем:

$ git add .
$ git commit -a -m "FIrst init for real book."
$ git push origin gh-pages


It works!

Вот, собственно, и всё. Идём по адресу denisshevchenko.github.io/ohaskell/index.html — и вот она:

Не только English

На данный момент разработка GitBook ведётся семимильными шагами, и буквально на днях была добавлена одна очень полезная возможность. Речь идёт о многоязычных книгах, а поскольку моя книга как раз и пишется на двух языках, я не мог пройти мимо такой фичи. Делает всё предельно просто.

Создаю в корне репозитория (ветка master) каталоги ru и en. Затем просто переношу в каждый из них все .md-файлы, относящиеся к двум вариантам книги. Причём, что удобно, в сами эти файлы, равно как и в их структуру, я не вношу никаких изменений, просто переношу.

Затем в корне репозитория создаю файл LANGS.md и пишу в него следующее:

* [По-русски](ru/)
* [in English](en/)

То есть обыкновенный Markdown-список с языковыми ссылками, каждая из которых ведёт внутрь своего языкового каталога.

Всё. Теперь собираю книгу с помощью команды gitbook точно так же, как было описано выше. Далее, как обычно, переношу это хозяйство в ветку gh-pages, коммичу-пушу — и в результате, при заходе на страницу, вижу вот это:



